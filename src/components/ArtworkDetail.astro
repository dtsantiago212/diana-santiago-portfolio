---
import { Image } from 'astro:assets';
import { getImage } from '../utils/images';

interface Props {
  artwork: {
    id: string;
    title: string;
    year: number;
    medium: string;
    dimensions?: string | null;
    file: string;
  };
  prevId: string | null;
  nextId: string | null;
  backUrl: string;
  backLabel: string;
}

const { artwork, prevId, nextId, backUrl, backLabel } = Astro.props;

const imagePath = artwork.file.replace('fullart/', '');
const imageData = getImage(imagePath);
---

<div class="artwork-detail">
  <div class="artwork-image">
    {imageData ? (
      <Image 
        src={imageData}
        alt={artwork.title}
        width={1200}
        loading="eager"
        format="webp"
        quality={85}
      />
    ) : (
      <img 
        src={`/images/${imagePath}`} 
        alt={artwork.title}
      />
    )}
  </div>
  <div class="artwork-info">
    <h1>{artwork.title}</h1>
    <div class="artwork-meta">
      <span>{artwork.year}</span>
      <span>{artwork.medium}</span>
      {artwork.dimensions && <span>{artwork.dimensions}</span>}
    </div>
    
    <nav class="artwork-nav">
      {prevId && <a href={`${backUrl}/${prevId}`}>&larr; Previous</a>}
      <a href={backUrl}>{backLabel}</a>
      {nextId && <a href={`${backUrl}/${nextId}`}>Next &rarr;</a>}
    </nav>
  </div>
</div>
