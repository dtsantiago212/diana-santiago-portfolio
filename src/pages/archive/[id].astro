---
import BaseLayout from '../../layouts/BaseLayout.astro';
import data from '../../data/artwork_metadata.json';

export function getStaticPaths() {
  return data.archive.map((artwork, index) => ({
    params: { id: artwork.id },
    props: { 
      artwork,
      prevId: index > 0 ? data.archive[index - 1].id : null,
      nextId: index < data.archive.length - 1 ? data.archive[index + 1].id : null,
    },
  }));
}

const { artwork, prevId, nextId } = Astro.props;
---

<BaseLayout title={artwork.title} description={`${artwork.title} - ${artwork.medium}, ${artwork.year}`}>
  <div class="artwork-detail">
    <div class="artwork-image">
      <img 
        src={`/images/${artwork.file.replace('fullart/', '')}`} 
        alt={artwork.title}
      />
    </div>
    <div class="artwork-info">
      <h1>{artwork.title}</h1>
      <div class="artwork-meta">
        <span>{artwork.year}</span>
        <span>{artwork.medium}</span>
        {artwork.dimensions && <span>{artwork.dimensions}</span>}
      </div>
      
      <nav class="artwork-nav">
        {prevId && <a href={`/archive/${prevId}`}>&larr; Previous</a>}
        <a href="/archive">Back to Archive</a>
        {nextId && <a href={`/archive/${nextId}`}>Next &rarr;</a>}
      </nav>
    </div>
  </div>
</BaseLayout>
